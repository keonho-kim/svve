# Postgres
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DATABASE=vtree
POSTGRES_POOL_MIN=1
POSTGRES_POOL_MAX=8
POSTGRES_CONNECT_TIMEOUT_MS=2000
POSTGRES_STATEMENT_TIMEOUT_MS=3000
VTREE_SUMMARY_TABLE=summary_nodes
VTREE_PAGE_TABLE=page_nodes
VTREE_EMBEDDING_DIM=4

# Redis queue
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_USERNAME=
REDIS_PASSWORD=
REDIS_USE_SSL=false
REDIS_MODULE_SEARCH=VtreeSearch
REDIS_MODULE_INGESTION=VtreeIngestor
REDIS_STREAM_SEARCH=search:jobs
REDIS_STREAM_SEARCH_DLQ=search:jobs:dlq
REDIS_CONSUMER_GROUP=vtree-search-group
QUEUE_MAX_LEN=200
QUEUE_REJECT_AT=180
JOB_RESULT_TTL_SEC=900
WORKER_BLOCK_MS=1000

# Retry/worker
WORKER_CONCURRENCY=4
JOB_MAX_RETRIES=3
JOB_RETRY_BASE_MS=200
JOB_RETRY_MAX_MS=2000

# Ingestion preprocess
INGEST_MAX_CHUNK_CHARS=1024
INGEST_SAMPLE_PER_EXTENSION=false
INGEST_ENABLE_TABLE_ANNOTATION=true
INGEST_ENABLE_IMAGE_ANNOTATION=true
INGEST_ASSET_OUTPUT_DIR=data/ingestion-assets

# LLM 주입 정책
# - 검색/적재 LLM은 .env가 아니라 Python 코드에서 생성한 LangChain 객체를 인자로 주입한다.
# - scripts/run-search.py, scripts/run-ingestion.py는 --llm-factory 인자로 팩토리 함수를 받는다.
